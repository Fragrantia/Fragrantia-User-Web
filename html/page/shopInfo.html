<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../../css/page/shopInfo.css">
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a1d04a27c7e45b8a44999bc8a7a55a62"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="../../js/MainPageModuleSetting.js"></script>
</head>
<body>
<div id="header"></div>
<div id="main_nav"></div>

<div id="shop_info">
    <div id="map" style="width:100%;height:350px;"></div>

    <div id="store_modal" class="store_modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="store-info">
                <div class="store-image">
                    <img class="store_image">
                    <div class="store_address_box">
                        <p class="store_tel"></p>
                        <p class="store_address"></p>
                    </div>
                </div>
                <div class="store-details">
                    <h2 class="store_name"></h2>
                    <p class="store_description"></p>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="footer"></div>
</body>


<script>
    window.onload = function() {
        var container = document.getElementById('map');
        var options = {
            center: new kakao.maps.LatLng(37.501921, 127.026946),
            level: 5
        };
        var map = new kakao.maps.Map(container, options);

        // 매장 위치 배열
        var stores = [
            {
                name: 'Fragrantia - Gangnam Store',
                address: '서울 강남구 미추홀동 130번길로 미누리 건물',
                tel: '02-0000-0000',
                latlng: new kakao.maps.LatLng(37.501921, 127.026946),
                image: 'https://picsum.photos/250',
                description:
                    '느낌이 새롭고 더욱 멋진 공간으로 돌아왔습니다.'
                    + '<br/>' + '<br/>' +
                    '브랜드의 철학과 컨셉에 맞게 재해석된 인테리어'
                    + '<br/>' + '<br/>' +
                    '디자인과 혁신적인 브랜드 경험을 경험할 수 있는 공간'
                    + '<br/>' + '<br/>' +
                    ' 지금 바로 여러분을 기다리고 있습니다.'
                    + '<br/>' + '<br/>' +
                    '새로운 컬렉션과 제품들을 만나보며, 트렌디한 분위기를 느끼며, '
                    + '<br/>' + '<br/>' +
                    '향의 세계로 떠나보세요. 향의 두 번째 이야기 여러분을 반겨드립니다.'
            },
            {
                name: '매장2',
                address: '서울시 서초구 양재동',
                latlng: new kakao.maps.LatLng(37.470576, 127.040736),
                image: 'https://picsum.photos/250',
                description: '매장 2에 대한 설명입니다.'
            },
            {
                name: '매장3',
                address: '서울시 송파구 잠실동',
                latlng: new kakao.maps.LatLng(37.514366, 127.101938),
                image: 'https://picsum.photos/250',
                description: '매장 3에 대한 설명입니다.'
            }
        ];

        var bounds = new kakao.maps.LatLngBounds();
        var markers = [];
        for (var i = 0; i < stores.length; i++) {
            var marker = new kakao.maps.Marker({
                position: stores[i].latlng
            });
            marker.setMap(map);
            markers.push(marker);

            bounds.extend(stores[i].latlng);

            kakao.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                    var modal = document.getElementById('store_modal');
                    var store_name = modal.querySelector('.store_name');
                    var store_address = modal.querySelector('.store_address');
                    var store_tel = modal.querySelector('.store_tel');
                    var store_image = modal.querySelector('.store_image');
                    var store_description = modal.querySelector('.store_description');

                    store_image.src = stores[i].image;
                    store_name.innerHTML = stores[i].name;
                    store_description.innerHTML = stores[i].description;
                    store_address.innerHTML = stores[i].address;
                    store_tel.innerHTML = stores[i].tel;

                    modal.style.display = 'block';
                }
            })(marker, i));
        }

        map.setBounds(bounds);


        var modal = document.getElementById('store_modal');
        var span = document.getElementsByClassName('close')[0];

        span.onclick = function() {
            modal.style.display = 'none';
        };

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        };
    };

</script>
</html>